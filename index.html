<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="une application pour la generation de qr code distinée au carte ou badge du CISAEH">
    <meta name="author" content="Oumar Guissé - 'The Big Tenor'">
    <title>QR Code Generator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="qrcode.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>CISAEH QR Codes</h1>
        </header>
        
        <div class="form-container">
            <div class="success-message" id="success-message">QR Code généré avec succès!</div>
            <form id="qr-form">
                <div class="form-group">
                    <label for="prenom">Prénom</label>
                    <input type="text" name="prenom" id="prenom" required>
                </div>
                
                <div class="form-group">
                    <label for="nom">Nom</label>
                    <input type="text" name="nom" id="nom" required>
                </div>
                
                <div class="form-group">
                    <label for="departement">Département</label>
                    <input type="text" name="departement" id="departement" required>
                </div>
                
                <div class="form-group">
                    <label for="Licence">Licence</label>
                    <input type="number" max="3" min="1" name="Licence" id="Licence">
                </div>
                
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" name="email" id="email">
                </div>
                
                <div class="form-group">
                    <label for="telephone">Téléphone</label>
                    <input type="tel" name="telephone" id="telephone">
                </div>
                
                <button type="submit">Générer QR Code</button>
            </form>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Génération du QR code...</p>
        </div>
        
        <div id="qr-codes-container"></div>
    </div>

   <!--  <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Charger les données du fichier JSON
            fetch('people_data.json')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('qr-codes-container');

                    data.forEach((person) => {
                        // Contenu du QR code
                        const info = `Nom: ${person.firstName} ${person.lastName}\nDépartement: ${person.department}\nEmail: ${person.email}\nTéléphone: ${person.phone}`;

                        // Créer un conteneur pour le QR code
                        const qrDiv = document.createElement('div');
                        qrDiv.className = 'qr-code';

                        // Générer le QR code
                        const qrCode = new QRCode(qrDiv, {
                            text: info,
                            width: 256,
                            height: 256,
                            colorDark: "#0072c6", // Couleur principale
                            colorLight: "#ffffff"
                        });

                        // Ajouter le logo
                        const canvas = qrDiv.querySelector('canvas');
                        const ctx = canvas.getContext('2d');
                        const logo = new Image();
                        logo.src = 'images/logo.png'; // Chemin du logo
                        logo.onload = function() {
                            const logoSize = 64;
                            const x = (canvas.width / 2) - (logoSize / 2);
                            const y = (canvas.height / 2) - (logoSize / 2);
                            ctx.drawImage(logo, x, y, logoSize, logoSize);

                            // Rendre le QR téléchargeable
                            const link = document.createElement('a');
                            link.href = canvas.toDataURL();
                            link.download = `${person.firstName}_${person.lastName}_QRCode.png`;
                            link.textContent = `Télécharger le QR Code de ${person.firstName}`;
                            qrDiv.appendChild(link);
                        };

                        // Ajouter le QR code au conteneur
                        container.appendChild(qrDiv);
                    });
                })
                .catch(error => console.error('Erreur :', error));
        });
    </script> -->
    <script src="script.js"></script>
</body>
</html>
